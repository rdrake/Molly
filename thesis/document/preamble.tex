% !TEX root = Thesis.tex
\usepackage{morewrites}
\usepackage{fontspec}
\usepackage{graphicx}
\usepackage{todonotes}

% Nicer math
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{unicode-math}
\usepackage{subdepth}
\usepackage{xfrac}

% Algorithms
\usepackage{algorithm}
\usepackage{algorithmic}

% Syntax highlighting
\usepackage{pythontex}
\setpygmentsfv{numbers=left,frame=topline,frame=lines,framesep=2mm}

% Diagrams
\usepackage[outputdir={figures/graphs/dot/}]{dot2texi}
\usepackage{tikz}
\usepackage{pgf}
%\input tikz
\usetikzlibrary{fit,shapes,arrows}

% Pretty tables
\usepackage{booktabs}

% Complain when we do bad things
\usepackage{nag}

% Proper quotation environments
\usepackage[autopunct=true]{csquotes}

% Create sub-figures/sub-tables/etc.
\usepackage{subcaption}

% Comment out large sections of code
\usepackage{comment}

% References
\usepackage{varioref}
\usepackage[linktocpage=true,colorlinks=true,urlcolor=dark-gray,linkcolor=dark-gray,citecolor=dark-gray]{hyperref}
\usepackage[capitalize]{cleveref}

% Glossaries, list of nomenclature, etc. (must go after hyperref)
\usepackage[acronym,style=tree,sanitize={name=false,description=false,symbol=false},toc]{glossaries}

% Use and configure bibliography
\usepackage[backend=biber,style=trad-alpha]{biblatex}
\addbibresource{Thesis.bib}

% Define a new environment for Clojure code
%\newmintedfile[cljcode]{clj}{linenos,frame=topline,frame=lines,framesep=2mm}
% SQL too!
%\newminted{sql}{linenos,frame=topline,frame=lines,framesep=2mm}

% Define new theorem environments
\theoremstyle{definition}
\newtheorem{defn}{Definition}
\newtheorem{ex}{Example}
\newtheorem{remark}{Remark}
\newtheorem{claim}{Claim}

\newglossary{symbols}{sym}{sbl}{List of Symbols}
\makeglossaries

% Change the image path prefix
\graphicspath{{figures/images/}}

% Make the text worth looking at
\defaultfontfeatures{Ligatures=TeX}
\setmainfont[
	Kerning=Uppercase
]{Garamond Premier Pro}
\setsansfont{Garamond Premier Pro}
\setmathfont{XITS Math}
\setmathfont[range=\mathbfsfit/{greek,Greek,latin,Latin}]{Garamond Premier Pro}
\setmonofont[Scale=0.9]{Consolas}

%\todo{Figure out why EB Garamond doesn't bold definitions}

% amsldoc, Section 4.14.2
\providecommand{\abs}[1]{\lvert#1\rvert}
\providecommand{\norm}[1]{\lVert#1\rVert}

% Simplify some of our function declarations
\DeclareMathOperator{\similarity}{similarity}
\DeclareMathOperator{\df}{df}
\DeclareMathOperator{\tfidf}{tf-idf}
\DeclareMathOperator{\tf}{tf}
\DeclareMathOperator{\idf}{idf}
\DeclareMathOperator{\score}{score}
\DeclareMathOperator{\freq}{freq}
\DeclareMathOperator{\query}{query}

%\definecolor{dark-gray}{gray}{0.50}
\definecolor{dark-gray}{gray}{0}

\newcommand{\jeremycomm}[1]{\todo[color=green!40]{#1}}
\newcommand{\markcomm}[1]{\todo[color=red!40]{#1}}
\newcommand{\kencomm}[1]{\todo[color=blue!40]{#1}}
\newcommand{\masoudcomm}[1]{\todo[color=yellow!40]{#1}}
\newcommand{\toreviewers}[1]{\todo[color=purple!40,inline]{#1}}

% Fix quotations so punctuation marks go inside.
\makeatletter
\DeclareRobustCommand{\squote}[1]{``#1\futurelet\@squotenext\@squotedecide}
\def\@squotedecide{%
	\if\noexpand\@squotenext,\let\next\@squotecorrect\else
		\if\noexpand\@squotenext.\let\next\@squotecorrect\else
			''\let\next\relax
		\fi
	\fi\next}
\def\@squotecorrect#1{\@squotenext''}
\makeatother